<%- include('../includes/head.ejs') %>
  <%- include('../includes/header.ejs') %>
    <main>
      <div class="container">
        <div class="container-form">
          <h1> Total Time </h1>
          <form action="/time/total" method="GET">
            <div class="mb-3">
              <label for="startDate" class="form-label">Start date</label>
              <input type="date" class="form-control" name="startDate" id="startDate" value="<%= date1 %>">
            </div>
            <div class="mb-3">
              <label for="endDate" class="form-label">End date</label>
              <input type="date" class="form-control" name="endDate" id="endDate" value="<%= date2 %>">
            </div>
            <div class="mb-3">
                <button type="submit" class="btn btn-primary">Search</button> 
            </div>

          </form>
          <div class="mb-3">
            <span>Total hours: <%= totalHours %> </span>
          </div>
        </div>
        <h3>Details</h3>
        <table class="table">
            <thead>
              <tr>
                <th scope="col">Activity</th>
                <th scope="col">Date</th>
                <th scope="col">Duration</th>
              </tr>
            </thead>
            <tbody>
              <% for (let i=0;i<data.length;i++) {%>
              <tr>
                <td> <%= data[i].activity %>  </td>
                <td><%= new Date(data[i].date).toDateString() %></td>
                <td><%= data[i].duration %></td>
              </tr>
              <% } %> 
            </tbody>
          </table>
          <%- include('../includes/pagination.ejs', {currentPage: currentPage, nextPage: nextPage, previousPage: previousPage, lastPage: lastPage, hasNextPage: hasNextPage, hasPreviousPage: hasPreviousPage,url:'&startDate='+date1+'&endDate='+date2}) %>
      </div>
    </main>

    <%- include('../includes/footer.ejs') %> 